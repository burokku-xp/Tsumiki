# Design: Settings UI

## Context

ユーザーが設定を簡単に管理できるように、WebViewベースのカスタム設定画面を追加します。VSCode標準設定UIとコマンドに加えて、より直感的な設定画面を提供します。

## Goals / Non-Goals

### Goals
- すべての設定を一箇所で管理できるUI
- 直感的な操作（チェックボックス、入力フィールド）
- 設定変更のリアルタイム反映
- Slack Webhook URLの安全な設定（Secret Storage使用）

### Non-Goals
- VSCode標準設定UIの削除（両方から設定可能にする）
- 設定のエクスポート/インポート（将来実装）
- 高度なカスタマイズ（色、フォントなど）

## Decisions

### Decision: WebViewベースの設定画面を実装
- **理由**: 柔軟なUI、Reactコンポーネントの再利用、統一されたデザイン
- **代替案**: VSCode標準設定UIのみ（配列形式の設定が扱いにくい）

### Decision: サイドパネルまたはタブとして表示
- **理由**: メインの表示画面と並行して設定を確認・変更できる
- **実装方法**: `viewsContainers`に設定用のビューを追加

### Decision: VSCode標準設定UIも維持
- **理由**: ユーザーの好みに応じて選択できる、既存ユーザーへの配慮
- **実装方法**: 両方の設定方法で同じ設定を参照・更新

### Decision: Secret Storageを使用してWebhook URLを保存
- **理由**: 機密情報の安全な保存、既存の実装を活用
- **代替案**: プレーンテキストで保存（セキュリティリスク）

### Decision: 設定変更のリアルタイム反映
- **理由**: ユーザーが即座に変更を確認できる
- **実装方法**: `workspace.onDidChangeConfiguration`イベントとWebViewへの通知

## Risks / Trade-offs

- **リスク**: 設定の二重管理（VSCode標準UIとカスタムUI）
- **対策**: 両方の設定方法で同じ設定を参照・更新する仕組みを実装

- **リスク**: WebViewのパフォーマンス
- **対策**: 必要最小限の更新、デバウンス処理

- **リスク**: 設定画面のメンテナンスコスト
- **対策**: シンプルなUI、既存コンポーネントの再利用

## Migration Plan

既存の設定はそのまま動作します。設定画面は追加機能として実装し、既存のVSCode標準設定UIやコマンドも引き続き使用可能です。

## Open Questions

- 設定画面をサイドパネルとタブのどちらで表示するか（ユーザー体験の観点から検討）
